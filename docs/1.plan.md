alright, let's get this done. we're burning daylight. the current scroll-to-bottom button is janky and hardcoded on the dashboard. that's amateur hour. we're gonna rip it out, forge a reusable hook and a slick floating action button component, then plug it back into the dashboard and drop it into the data demo page for good measure. one refactor, two birds. let's roll.

```yaml
plan:
  uuid: '1e8a9c4f-7b0d-4a1e-8f2c-5d9b6a3e7f01'
  status: 'todo'
  title: 'Refactor Scroll Logic into a Reusable Hook and Component'
  introduction: |
    Right now, our scroll-to-bottom logic is siloed inside the Dashboard page, and the button itself is hardcoded. It's a classic case of premature optimization that's now tech debt. The button isn't even sticking correctly. This is a dead-simple fix, but we're going to do it right.

    The plan is to rip out that page-specific hook, forge it into a generic, reusable `useScrollPosition` hook that any page can use. We'll also mint a new `ScrollToBottomButton` component to house the UI and its animations, killing off the one-off implementation. Finally, we'll retrofit the Dashboard with these new, superior parts and then drop this functionality into the DataDemo page, which has been begging for it. Ship fast, refactor faster.
  parts:
    - uuid: 'a3d2b1c0-4f5e-4b6d-8c7a-9e1f0b2a3c4d'
      status: 'todo'
      name: 'Part 1: Forge Reusable Scroll Primitives'
      reason: |
        The core problem is code duplication and lack of abstraction. The scroll detection logic and the UI for the "scroll to bottom" button are valuable across multiple pages, but they're currently hardcoded into the Dashboard. Creating a generic hook and a shared component is the canonical way to fix this, making the codebase leaner and future implementations trivial.
      steps:
        - uuid: 'b4c1d0e9-5a6b-4c7d-8e9f-1a2b3c4d5e6f'
          status: 'todo'
          name: '1. Generalize Scroll Hook'
          reason: |
            The existing `useDashboardScroll.hook.ts` is a good starting point but is coupled to its original location. We'll move it to `src/hooks/`, rename it to `useScrollPosition.hook.ts`, and strip out any Dashboard-specific cruft. It'll be a lean, mean, scroll-tracking machine.
          files:
            - src/pages/Dashboard/hooks/useDashboardScroll.hook.ts
            - src/hooks/useScrollPosition.hook.ts
          operations:
            - 'Rename `src/pages/Dashboard/hooks/useDashboardScroll.hook.ts` to a new file `src/hooks/useScrollPosition.hook.ts`.'
            - "In the new `useScrollPosition.hook.ts`, update the function signature from `useDashboardScroll(contentRef: React.RefObject<HTMLDivElement>, isInSidePane: boolean)` to `useScrollPosition(contentRef: React.RefObject<HTMLDivElement>, options?: { isPane?: boolean })`."
            - "Update the call to `useAutoAnimateTopBar` to use `options?.isPane ?? false` instead of `isInSidePane`."
            - 'Export the function as `useScrollPosition`.'
        - uuid: 'c5d2e1f0-6b7c-4d8e-9f0a-2b3c4d5e6f7a'
          status: 'todo'
          name: '2. Create ScrollToBottomButton Component'
          reason: |
            The button's markup, styling, and visibility logic are currently cluttering the Dashboard page component. Encapsulating this in a dedicated `ScrollToBottomButton.tsx` cleans up the page, ensures consistent styling, and allows for easy reuse.
          files:
            - src/components/shared/ScrollToBottomButton.tsx
          operations:
            - 'Create a new file at `src/components/shared/ScrollToBottomButton.tsx`.'
            - 'Define a new React functional component `ScrollToBottomButton` that accepts `isVisible: boolean` and `onClick: () => void` as props.'
            - 'Use `framer-motion` for smooth appearance/disappearance. The component should render `AnimatePresence` and a `motion.div` that animates based on the `isVisible` prop.'
            - 'Inside the `motion.div`, place a `Button` component from `@/components/ui/button` with an `ArrowDown` icon from `lucide-react`.'
            - 'Apply the following classes to the button: `absolute bottom-4 right-4 z-50 h-10 w-10 rounded-full shadow-lg bg-background/80 backdrop-blur-sm` to ensure it floats correctly.'
        - uuid: 'd6e3f2a1-7c8d-4e9f-a01b-3c4d5e6f7a8b'
          status: 'todo'
          name: '3. Ensure Positioning Context in PageLayout'
          reason: |
            For our absolutely positioned floating action button to work, its parent container needs a `position: relative` context. The `PageLayout` component is the logical place for this, as it wraps the scrollable content area on every page.
          files:
            - src/components/shared/PageLayout.tsx
          operations:
            - 'In `PageLayout.tsx`, find the `className` prop of the main wrapper `div`.'
            - "Add the `relative` class to the `cn()` utility call. The classes should look like `'h-full w-full overflow-y-auto overflow-x-hidden p-6 pt-0 md:p-8 md:pt-0 relative'`."
      context_files:
        compact:
          - src/pages/Dashboard/hooks/useDashboardScroll.hook.ts
          - src/components/shared/PageLayout.tsx
          - src/pages/Dashboard/index.tsx
        medium:
          - src/pages/Dashboard/hooks/useDashboardScroll.hook.ts
          - src/components/shared/PageLayout.tsx
          - src/pages/Dashboard/index.tsx
          - src/hooks/useAutoAnimateTopBar.ts
        extended:
          - src/pages/Dashboard/hooks/useDashboardScroll.hook.ts
          - src/components/shared/PageLayout.tsx
          - src/pages/Dashboard/index.tsx
          - src/hooks/useAutoAnimateTopBar.ts
          - src/components/ui/button.tsx
    - uuid: 'e7f4a3b2-8d9e-4fa0-b12c-4d5e6f7a8b9c'
      status: 'todo'
      name: 'Part 2: Retrofit the Dashboard Page'
      reason: |
        With our shiny new hook and component ready, it's time to refactor the Dashboard page. This will serve as the proof-of-concept for our new primitives and will fix the original button positioning bug.
      steps:
        - uuid: 'f8a5b4c3-9eaf-40b1-c23d-5e6f7a8b9c0d'
          status: 'todo'
          name: '1. Integrate New Primitives in Dashboard'
          reason: |
            This step replaces the old, page-specific implementation with the new, reusable ones, completing the refactor for this page.
          files:
            - src/pages/Dashboard/index.tsx
          operations:
            - 'Remove the import for `useDashboardScroll`.'
            - "Import `useScrollPosition` from `@/hooks/useScrollPosition.hook`."
            - "Import `ScrollToBottomButton` from `@/components/shared/ScrollToBottomButton`."
            - "Replace the `useDashboardScroll` call with `useScrollPosition(scrollRef, { isPane: isInSidePane })`. The hook returns `handleScroll`, `scrollToBottom`, `isAtBottom`, and `isScrolling`."
            - 'Add the `onScroll={handleScroll}` prop to the `<PageLayout>` component.'
            - 'Remove the old inline `Button` for scrolling from the JSX.'
            - 'Add `<ScrollToBottomButton isVisible={!isAtBottom && !isScrolling} onClick={scrollToBottom} />` inside the `<PageLayout>` component, just before its closing tag.'
      context_files:
        compact:
          - src/pages/Dashboard/index.tsx
          - src/hooks/useScrollPosition.hook.ts
          - src/components/shared/ScrollToBottomButton.tsx
        medium:
          - src/pages/Dashboard/index.tsx
          - src/hooks/useScrollPosition.hook.ts
          - src/components/shared/ScrollToBottomButton.tsx
          - src/components/shared/PageLayout.tsx
        extended:
          - src/pages/Dashboard/index.tsx
          - src/hooks/useScrollPosition.hook.ts
          - src/components/shared/ScrollToBottomButton.tsx
          - src/components/shared/PageLayout.tsx
          - src/pages/Dashboard/hooks/useDashboardScroll.hook.ts
    - uuid: '09b6c5d4-afba-41c2-d34e-6f7a8b9c0d1e'
      status: 'todo'
      name: 'Part 3: Add Scroll Functionality to DataDemo Page'
      reason: |
        The DataDemo page is a long, scrollable list that would greatly benefit from a quick "scroll to bottom" action. This demonstrates the value of our refactor by easily extending functionality to new parts of the app.
      steps:
        - uuid: '1ac7d6e5-bfcb-42d3-e45f-7a8b9c0d1e2f'
          status: 'todo'
          name: '1. Implement Scroll Handling in DataDemo'
          reason: |
            To add the scroll-to-bottom button, we first need to track the scroll state of the page. This involves using our new `useScrollPosition` hook.
          files:
            - src/pages/DataDemo/index.tsx
          operations:
            - "Import `useScrollPosition` from `@/hooks/useScrollPosition.hook`."
            - "Import `ScrollToBottomButton` from `@/components/shared/ScrollToBottomButton`."
            - "The `scrollRef` already exists. Below its definition, call the hook: `const { handleScroll, scrollToBottom, isAtBottom, isScrolling } = useScrollPosition(scrollRef);`."
            - 'Add the `onScroll={handleScroll}` prop to the `<PageLayout>` component.'
            - 'Add `<ScrollToBottomButton isVisible={!isAtBottom && !isScrolling} onClick={scrollToBottom} />` inside the `<PageLayout>` component, just before its closing tag.'
      context_files:
        compact:
          - src/pages/DataDemo/index.tsx
          - src/hooks/useScrollPosition.hook.ts
          - src/components/shared/ScrollToBottomButton.tsx
        medium:
          - src/pages/DataDemo/index.tsx
          - src/hooks/useScrollPosition.hook.ts
          - src/components/shared/ScrollToBottomButton.tsx
          - src/components/shared/PageLayout.tsx
        extended:
          - src/pages/DataDemo/index.tsx
          - src/hooks/useScrollPosition.hook.ts
          - src/components/shared/ScrollToBottomButton.tsx
          - src/components/shared/PageLayout.tsx
          - src/pages/Dashboard/index.tsx
  conclusion: |
    This refactor kills two birds with one stone. We fix a UI bug on the Dashboard and simultaneously create a reusable pattern for scroll-related UX features. The code becomes cleaner, more modular, and easier to maintain. By applying this new pattern to the DataDemo page, we immediately prove its value and improve user experience there as well. It's a clean win that follows the DRY principle and sets us up for faster development in the future.
  context_files:
    compact:
      - src/pages/Dashboard/index.tsx
      - src/pages/DataDemo/index.tsx
      - src/pages/Dashboard/hooks/useDashboardScroll.hook.ts
      - src/components/shared/PageLayout.tsx
    medium:
      - src/pages/Dashboard/index.tsx
      - src/pages/DataDemo/index.tsx
      - src/pages/Dashboard/hooks/useDashboardScroll.hook.ts
      - src/components/shared/PageLayout.tsx
      - src/hooks/useAutoAnimateTopBar.ts
    extended:
      - src/pages/Dashboard/index.tsx
      - src/pages/DataDemo/index.tsx
      - src/pages/Dashboard/hooks/useDashboardScroll.hook.ts
      - src/components/shared/PageLayout.tsx
      - src/hooks/useAutoAnimateTopBar.ts
      - src/components/ui/button.tsx
```
`
