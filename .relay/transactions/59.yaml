uuid: 440409a6-897c-41ca-9c4c-39655d8f6f57
projectId: amazing-app-shell
createdAt: '2025-10-10T14:16:42.907Z'
gitCommitMsg: >-
  fix(ui): Increase toast visibility and improve theme contrast

  - Updated the application's base theme in `index.css` to increase the contrast
  between the page background and card-based UI elements. This improves overall
  legibility. - Modified the Toast component to use `bg-popover` and an
  increased `shadow-xl` for better visual prominence. - Defined a distinct
  `popover` background color in dark mode to further separate toasts from other
  card elements.
promptSummary: >-
  User reported that toasts are still hardly visible after the initial fix. The
  problem is low contrast.
reasoning:
  - >-
    You are right, my previous change was too subtle. The low contrast between
    the background and the toast is the primary issue. I'll take a more direct
    approach to fix this.
  - 'My plan involves two steps:'
  - >-
    1.  **Improve Overall Theme Contrast**: I will adjust the application's core
    colors in `src/index.css`. By making the main background color a light gray
    in light mode and darker in dark mode, all "card" based elements (including
    sidebars, top bar, and the toast) will have a much clearer visual
    separation. I will also give popovers a distinct color in dark mode.
  - >-
    2.  **Enhance the Toast Component**: I will modify
    `src/components/ui/toast.tsx` to use `bg-popover` for its background and
    increase its shadow (`shadow-xl`). This makes the toast semantically correct
    and gives it more visual "lift" from the content behind it.
  - >-
    These changes combined will make the toasts significantly more visible and
    improve the overall UI clarity.
  - '### Step 1: Improve Theme Colors for Better Contrast'
  - >-
    I'll update `src/index.css` to create more distinction between the page
    background and card elements.
  - '### Step 2: Make the Toast Component More Prominent'
  - >-
    Now I'll edit `src/components/ui/toast.tsx` to use the `popover` background
    and a stronger shadow.
  - >-
    These changes will make your toasts pop, ensuring they are always noticeable
    and easy to read.
  - '---'
operations:
  - type: write
    path: src/index.css
    content: |
      <<<<<<< SEARCH
      @layer base {
        :root {
          --primary-hsl: 220 84% 60%;
          --background: 210 20% 98%;
          --foreground: 222.2 84% 4.9%;
          --card: 0 0% 100%;
          --card-foreground: 222.2 84% 4.9%;
          --popover: 0 0% 100%;
          --popover-foreground: 222.2 84% 4.9%;
          --primary: var(--primary-hsl);
          --primary-foreground: 210 40% 98%;
          --secondary: 210 40% 96%;
          --secondary-foreground: 222.2 84% 4.9%;
          --muted: 210 40% 96%;
          --muted-foreground: 215.4 16.3% 46.9%;
          --accent: 210 40% 96%;
          --accent-foreground: 222.2 84% 4.9%;
          --destructive: 0 84.2% 60.2%;
          --destructive-foreground: 210 40% 98%;
          --border: 214.3 31.8% 91.4%;
          --input: 214.3 31.8% 91.4%;
          --ring: var(--primary-hsl);
          --radius: 1rem;
        }

        .dark {
          --background: 240 6% 10%;
          --foreground: 210 40% 98%;
          --card: 240 6% 14%;
          --card-foreground: 210 40% 98%;
          --popover: 240 6% 14%;
          --popover-foreground: 210 40% 98%;
          --primary: var(--primary-hsl);
          --primary-foreground: 210 40% 98%;
          --secondary: 240 5% 20%;
          --secondary-foreground: 210 40% 98%;
          --muted: 240 5% 20%;
          --muted-foreground: 215 20.2% 65.1%;
          --accent: 240 5% 20%;
          --accent-foreground: 210 40% 98%;
          --destructive: 0 62.8% 30.6%;
          --destructive-foreground: 210 40% 98%;
          --border: 240 5% 20%;
          --input: 240 5% 20%;
          --ring: var(--primary-hsl);
        }
      }
      =======
      @layer base {
        :root {
          --primary-hsl: 220 84% 60%;
          --background: 210 40% 96.1%;
          --foreground: 222.2 84% 4.9%;
          --card: 0 0% 100%;
          --card-foreground: 222.2 84% 4.9%;
          --popover: 0 0% 100%;
          --popover-foreground: 222.2 84% 4.9%;
          --primary: var(--primary-hsl);
          --primary-foreground: 210 40% 98%;
          --secondary: 210 40% 96%;
          --secondary-foreground: 222.2 84% 4.9%;
          --muted: 210 40% 96%;
          --muted-foreground: 215.4 16.3% 46.9%;
          --accent: 210 40% 96%;
          --accent-foreground: 222.2 84% 4.9%;
          --destructive: 0 84.2% 60.2%;
          --destructive-foreground: 210 40% 98%;
          --border: 214.3 31.8% 91.4%;
          --input: 214.3 31.8% 91.4%;
          --ring: var(--primary-hsl);
          --radius: 1rem;
        }

        .dark {
          --background: 240 6% 9%;
          --foreground: 210 40% 98%;
          --card: 240 6% 14%;
          --card-foreground: 210 40% 98%;
          --popover: 240 6% 12%;
          --popover-foreground: 210 40% 98%;
          --primary: var(--primary-hsl);
          --primary-foreground: 210 40% 98%;
          --secondary: 240 5% 20%;
          --secondary-foreground: 210 40% 98%;
          --muted: 240 5% 20%;
          --muted-foreground: 215 20.2% 65.1%;
          --accent: 240 5% 20%;
          --accent-foreground: 210 40% 98%;
          --destructive: 0 62.8% 30.6%;
          --destructive-foreground: 210 40% 98%;
          --border: 240 5% 20%;
          --input: 240 5% 20%;
          --ring: var(--primary-hsl);
        }
      }
      >>>>>>> REPLACE
    patchStrategy: search-replace
  - type: write
    path: src/components/ui/toast.tsx
    content: |
      <<<<<<< SEARCH
            className={cn(
              'flex items-center justify-between w-full max-w-sm p-4 rounded-lg border shadow-lg bg-card text-foreground',
              variantStyles[variant]
            )}
      =======
            className={cn(
              'flex items-center justify-between w-full max-w-sm p-4 rounded-lg border shadow-xl bg-popover text-popover-foreground',
              variantStyles[variant]
            )}
      >>>>>>> REPLACE
    patchStrategy: search-replace
snapshot:
  src/index.css: |-
    @import 'tailwindcss/base';
    @import 'tailwindcss/components';
    @import 'tailwindcss/utilities';

    @layer base {
      :root {
        --primary-hsl: 220 84% 60%;
        --background: 210 20% 98%;
        --foreground: 222.2 84% 4.9%;
        --card: 0 0% 100%;
        --card-foreground: 222.2 84% 4.9%;
        --popover: 0 0% 100%;
        --popover-foreground: 222.2 84% 4.9%;
        --primary: var(--primary-hsl);
        --primary-foreground: 210 40% 98%;
        --secondary: 210 40% 96%;
        --secondary-foreground: 222.2 84% 4.9%;
        --muted: 210 40% 96%;
        --muted-foreground: 215.4 16.3% 46.9%;
        --accent: 210 40% 96%;
        --accent-foreground: 222.2 84% 4.9%;
        --destructive: 0 84.2% 60.2%;
        --destructive-foreground: 210 40% 98%;
        --border: 214.3 31.8% 91.4%;
        --input: 214.3 31.8% 91.4%;
        --ring: var(--primary-hsl);
        --radius: 1rem;
      }

      .dark {
        --background: 240 6% 10%;
        --foreground: 210 40% 98%;
        --card: 240 6% 14%;
        --card-foreground: 210 40% 98%;
        --popover: 240 6% 14%;
        --popover-foreground: 210 40% 98%;
        --primary: var(--primary-hsl);
        --primary-foreground: 210 40% 98%;
        --secondary: 240 5% 20%;
        --secondary-foreground: 210 40% 98%;
        --muted: 240 5% 20%;
        --muted-foreground: 215 20.2% 65.1%;
        --accent: 240 5% 20%;
        --accent-foreground: 210 40% 98%;
        --destructive: 0 62.8% 30.6%;
        --destructive-foreground: 210 40% 98%;
        --border: 240 5% 20%;
        --input: 240 5% 20%;
        --ring: var(--primary-hsl);
      }
    }

    @layer base {
      * {
        @apply border-border;
      }
      body {
        @apply bg-background text-foreground;
      }
    }

    /* Custom scrollbar styles */
    ::-webkit-scrollbar {
      width: 6px;
      height: 6px;
    }

    ::-webkit-scrollbar-track {
      @apply bg-transparent;
    }

    ::-webkit-scrollbar-thumb {
      @apply bg-border rounded-full;
    }

    ::-webkit-scrollbar-thumb:hover {
      @apply bg-muted-foreground/50;
    }
  src/components/ui/toast.tsx: >-
    import {
      forwardRef,
      useImperativeHandle,
      useRef,
      useEffect,
      createContext,
      useContext,
      useCallback,
      type ReactNode,
    } from 'react';

    import { gsap } from 'gsap';

    import { Toaster as SonnerToaster, toast as sonnerToast } from 'sonner';

    import {
      CheckCircle,
      AlertCircle,
      Info,
      AlertTriangle,
      X,
    } from 'lucide-react';


    import { Button } from '@/components/ui/button';

    import { cn } from '@/lib/utils';


    type Variant = 'default' | 'success' | 'error' | 'warning';

    type Position =
      | 'top-left'
      | 'top-center'
      | 'top-right'
      | 'bottom-left'
      | 'bottom-center'
      | 'bottom-right';

    interface ActionButton {
      label: string;
      onClick: () => void;
      variant?: 'default' | 'outline' | 'ghost';
    }


    export interface ToasterProps {
      title?: string;
      message: string;
      variant?: Variant;
      duration?: number;
      position?: Position;
      actions?: ActionButton;
      onDismiss?: () => void;
      highlightTitle?: boolean;
    }


    export interface ToasterRef {
      show: (props: ToasterProps) => void;
    }


    const variantStyles: Record<Variant, string> = {
      default: 'border-border',
      success: 'border-green-600/50',
      error: 'border-destructive/50',
      warning: 'border-amber-600/50',
    };


    const titleColor: Record<Variant, string> = {
      default: 'text-foreground',
      success: 'text-green-600 dark:text-green-400',
      error: 'text-destructive',
      warning: 'text-amber-600 dark:text-amber-400',
    };


    const iconColor: Record<Variant, string> = {
      default: 'text-muted-foreground',
      success: 'text-green-600 dark:text-green-400',
      error: 'text-destructive',
      warning: 'text-amber-600 dark:text-amber-400',
    };


    const variantIcons: Record<
      Variant,
      React.ComponentType<{ className?: string }>
    > = {
      default: Info,
      success: CheckCircle,
      error: AlertCircle,
      warning: AlertTriangle,
    };


    const CustomToast = ({
      toastId,
      title,
      message,
      variant = 'default',
      duration = 4000,
      actions,
      onDismiss,
      highlightTitle,
    }: ToasterProps & { toastId: number | string }) => {
      const toastRef = useRef<HTMLDivElement>(null);
      const Icon = variantIcons[variant];

      const handleDismiss = () => {
        if (toastRef.current) {
          gsap.to(toastRef.current, {
            opacity: 0,
            y: 50,
            scale: 0.95,
            duration: 0.3,
            ease: 'easeOut',
            onComplete: () => {
              sonnerToast.dismiss(toastId);
              onDismiss?.();
            },
          });
        } else {
          sonnerToast.dismiss(toastId);
          onDismiss?.();
        }
      };

      useEffect(() => {
        if (toastRef.current) {
          gsap.from(toastRef.current, {
            opacity: 0,
            y: 50,
            scale: 0.95,
            duration: 0.3,
            ease: 'easeOut',
          });
        }

        if (duration !== Infinity) {
          const timer = setTimeout(handleDismiss, duration);
          return () => clearTimeout(timer);
        }
      }, [duration]);

      return (
        <div
          ref={toastRef}
          className={cn(
            'flex items-center justify-between w-full max-w-sm p-4 rounded-lg border shadow-lg bg-card text-foreground',
            variantStyles[variant]
          )}
        >
          <div className="flex items-start gap-3">
            <Icon
              className={cn('h-5 w-5 mt-0.5 flex-shrink-0', iconColor[variant])}
            />
            <div className="space-y-1">
              {title && (
                <h3
                  className={cn(
                    'text-sm font-semibold leading-none',
                    titleColor[variant],
                    highlightTitle && titleColor['success']
                  )}
                >
                  {title}
                </h3>
              )}
              <p className="text-sm text-muted-foreground">{message}</p>
            </div>
          </div>

          <div className="flex items-center gap-2">
            {actions?.label && (
              <Button
                variant={actions.variant || 'outline'}
                size="sm"
                onClick={() => {
                  actions.onClick();
                  handleDismiss();
                }}
                className={cn(
                  'h-8 px-3 text-xs cursor-pointer',
                  variant === 'success'
                    ? 'text-green-600 border-green-600 hover:bg-green-600/10 dark:hover:bg-green-400/20'
                    : variant === 'error'
                    ? 'text-destructive border-destructive hover:bg-destructive/10 dark:hover:bg-destructive/20'
                    : variant === 'warning'
                    ? 'text-amber-600 border-amber-600 hover:bg-amber-600/10 dark:hover:bg-amber-400/20'
                    : 'text-foreground border-border hover:bg-muted/10 dark:hover:bg-muted/20'
                )}
              >
                {actions.label}
              </Button>
            )}
            <button
              onClick={handleDismiss}
              className="rounded-md p-1 hover:bg-muted/50 dark:hover:bg-muted/30 transition-colors focus:outline-none focus:ring-2 focus:ring-ring"
              aria-label="Dismiss notification"
            >
              <X className="h-4 w-4 text-muted-foreground" />
            </button>
          </div>
        </div>
      );
    };


    const Toaster = forwardRef<ToasterRef, { defaultPosition?: Position }>(
      ({ defaultPosition = 'bottom-right' }, ref) => {
        useImperativeHandle(ref, () => ({
          show({
            title,
            message,
            variant = 'default',
            duration = 4000,
            position = defaultPosition,
            actions,
            onDismiss,
            highlightTitle,
          }) {
            sonnerToast.custom(
              (toastId) => (
                <CustomToast
                  toastId={toastId}
                  title={title}
                  message={message}
                  variant={variant}
                  duration={duration}
                  actions={actions}
                  onDismiss={onDismiss}
                  highlightTitle={highlightTitle}
                />
              ),
              {
                duration: Infinity, // Component handles its own lifecycle for animations
                position,
              }
            );
          },
        }));

        return (
          <SonnerToaster
            position={defaultPosition}
            toastOptions={{ unstyled: true }}
            className="z-[2147483647]"
          />
        );
      }
    );

    Toaster.displayName = 'Toaster';


    const ToasterContext = createContext<((props: ToasterProps) => void) |
    null>(
      null
    );


    export const useToast = () => {
      const context = useContext(ToasterContext);
      if (!context) {
        throw new Error('useToast must be used within a ToasterProvider');
      }
      return { show: context };
    };


    export const ToasterProvider = ({ children }: { children: ReactNode }) => {
      const toasterRef = useRef<ToasterRef>(null);

      const showToast = useCallback((props: ToasterProps) => {
        toasterRef.current?.show(props);
      }, []);
      
      return (
        <ToasterContext.Provider value={showToast}>
          {children}
          <Toaster ref={toasterRef} />
        </ToasterContext.Provider>
      );
    };
approved: true
linesAdded: null
linesRemoved: null
linesDifference: null
gitCommittedAt: null
status: committed
id: 59
